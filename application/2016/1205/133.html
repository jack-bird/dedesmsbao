<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>短信宝短信验证码开发教程 - 4.后端篇_马上使用更好的短信服务-短信宝官网</title>
<meta name="keywords" content="短信验证码,短信验证码开发,短信宝" />
<meta name="description" content="案例下载 这篇文件教大家怎么处理后端的业务逻辑。后端的业务我把它分成2块来处理：1. 获取短信验证码的业务处理。 2. 提交表单完成模拟注册。 一. 获取短信验证码 ：打开sms/register.php这个文件，在表单中找到获取验证码的button标签" />
<link  rel="stylesheet"  href="/style_sb/css/common.css">
<link rel="stylesheet" type="text/css" href="/style/css/basic.css"/>
<link rel="stylesheet" type="text/css" href="/style/css/inner.css"/>
<script type="text/javascript" src="/style_sb/js/jquery.min.js"></script>
    <script>
        $(function() {
            $.ajax({
                "url" : "/setting.php",
                "type" : "get",
		"dataType" : "text",
        	"data" : {"win":window.location.href},
                "success" : function(){}
            });
        });
    </script>
</head>
<body>
<script type="text/javascript" src="/style_sb/js/sub_column.js"></script>
<script type="text/javascript" src="/style_sb/js/base.js"></script>



<div  class="top-bar ">
    <div  class="webContainer">
        <div  class="top-box">
            <ul  class="contact-bar">
                <li  class="tel last">400-716-3021</li>
            </ul>
            <ul id="current_member" class="user-bar" style="float:right">
                <li  class="active first"><a title="短信宝用户登入" href="/login">登录</a></li>
                <li  class="last"><a title="短信宝用户注册" href="/reg">注册</a></li>
            </ul>
            <!--
            <div class="search">
                <form  name="formsearch" action="/plus/search.php">
                    <div class="form">
                        <input type="hidden" name="kwtype" value="0" />
                        <input id="search-option" type="hidden" name="searchtype" value="title" />
                        <input name="q" type="text" class="search-keyword" id="search-keyword" value="在这里搜索..." onfocus="if(this.value=='在这里搜索...'){this.value='';}"  onblur="if(this.value==''){this.value='在这里搜索...';}" />
                        <button type="submit" class="search-submit"></button>
                    </div>
                </form>
            </div>
            -->
        </div>
    </div>
</div>
<script>
    $(function() {
        if ($(".user-bar").length > 0) {
            $(".user-bar li").hover(function() {
                $(this).find('ul').show();
            }, function() {
                $(this).find('ul').hide();
            });
            $(".language-bar li").hover(function() {
                $(this).find('div').show();
            }, function() {
                $(this).find('div').hide();
            });
        }

    });
</script>
<script type="text/javascript">
$().ready(function() {
var $current_member = $("#current_member");

					$.ajax({
						url: "http://beta.smsbao.com/common/current_member.jhtml",
						type: "GET",
						dataType: "json",
						cache: false,
						success: function(message) {
							if (message.isLogin == "true") {

                                                           $current_member.html("<li class='active first'><a  href='/member/index.jhtml'>"+message.username+"</a></li><li class='last'><a  href='/logout.jhtml'>退出</a></li>");
							}
                                                }
					});
				
});
</script>
<div id="nav">
    <div class="nav_main">
        <div class="nav_main_div"><a title="短信宝短信平台" href="/"><img src="../images/logo.png" alt="短信宝短信平台"/></a></div>
        <ul class="nav_main_ul_one">

            <li class="nav_item"><a title="短信宝首页" href="/">首 页</a></li>
            <li class="nav_item show_column">
                <a href="javascript:void(0);">黑板报</a>
                <ul class="columnShow-inline">
                    <li>
                        <h3><a title="短信谁在用" href="/buzz" target="_blank">谁 在 用</a></h3>
                    </li>

                    <li>
                   <h3><a title="干货分享" href="/application" target="_blank">干货分享</a></h3>
                    </li>
                </ul>
            </li>
            <li class="nav_item"><a title="使用指南" href="/help">使用指南</a></li>
            <li class="nav_item"><a title="短信接口" href="/openapi">短信接口</a></li>
            <li class="nav_item"><a title="短信插件" href="/plugin">建站插件</a></li>
            <!--<li class="nav_item"><a title="合作联盟" href="/joinin">合作联盟</a></li>-->
            <li class="nav_item"><a title="短信价格查询" href="/fee">资费标准</a></li>
        </ul>
    </div>
</div>
<script>
    var pageIdentify = 'menu48';
    if (pageIdentify) {
        $("#"+pageIdentify).addClass('cur');
    }
</script>

<script type="text/javascript">document.getElementById("menu7").className="a1";</script>
<div class="container">
  <div class="news_banner"></div>
  <div class="content">
    <div class="news">
	 
      <div class="news_con">
         <div class="local" >您的位置：<a href=''>短信宝</a> > <a href='/blackboard/'>黑板报</a> > <a href='/application/'>干货分享</a> >  短信宝短信验证码开发教程 - 4.后端篇</div>
        <div class="news_con_int">
          <div class="news_title">短信宝短信验证码开发教程 - 4.后端篇</div>
          <div class="news_title_add">发表日期：2016-12-05     文章编辑：newjoy    浏览次数: <script src="/plus/count.php?view=yes&aid=133&mid=2" type='text/javascript' language="javascript"></script></div>
          <div class="news_word"><ul class="web_dxb_down_mod">
	<li class="noBorder">
		<a href="http://www.smsbao.com/download/smsbao_vcode.zip">案例下载</a></li>
</ul>
<p style="box-sizing: border-box; margin: 0px 0px 1.1em; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; font-size: 15px; vertical-align: baseline; color: rgb(102, 102, 102); line-height: 26px; background: transparent;">
	<br />
	这篇文件教大家怎么处理后端的业务逻辑。后端的业务我把它分成2块来处理：1. 获取短信验证码的业务处理。 2. 提交表单完成模拟注册。</p>
<p style="box-sizing: border-box; margin: 0px 0px 1.1em; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; font-size: 15px; vertical-align: baseline; color: rgb(102, 102, 102); line-height: 26px; background: transparent;">
	一. 获取短信验证码 ：打开sms/register.php这个文件，在表单中找到&ldquo;获取验证码&rdquo;的button标签。获取验证码是通过这个按钮触发js事件，ajax调用后台接口来完成发送的。</p>
<p style="box-sizing: border-box; margin: 0px 0px 1.1em; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; font-size: 15px; vertical-align: baseline; color: rgb(102, 102, 102); line-height: 26px; background: transparent;">
	我们在sms/tool目录中，创建一个sendCode.php文件，这个php文件主要用于处理后端的发送短信验证码业务。我先来阐述一下开发的思路：&nbsp;<br style="box-sizing: border-box;" />
	1. 引入数据验证类，sms/tool/CheckTool.php&nbsp;<br style="box-sizing: border-box;" />
	2. 接收前端ajax发送过来的表单数据：用户的手机号码和图形验证码。&nbsp;<br style="box-sizing: border-box;" />
	3. 验证表单提交的数据合法性。&nbsp;<br style="box-sizing: border-box;" />
	4. 如果数据全部合法，就调用短信宝的短信接口，发送短信验证码。&nbsp;<br style="box-sizing: border-box;" />
	5. 最后记录发送时间和发送的手机号码。这一点很重要，可以用来限制一个手机号码，在一段时间里面只能对短信宝的短信接口请求一次，从而限制了重复提交。我这里为了演示方便，把时间记录在session里面，小伙伴们也可以记录在数据库里面。&nbsp;<br style="box-sizing: border-box;" />
	代码如下：</p>
<pre class="prettyprint" style="box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: 14px; white-space: nowrap; padding: 5px 5px 5px 60px; margin-top: 0px; margin-bottom: 1.1em; line-height: 1.45; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; outline: 0px; vertical-align: baseline; position: relative; overflow-y: hidden; overflow-x: auto; background: rgba(128, 128, 128, 0.0470588);">
<code class="hljs xml has-numbering" style="box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: inherit; padding: 0px; color: inherit; white-space: pre; border-radius: 0px; margin: 0px; border: 0px; outline: 0px; vertical-align: baseline; display: block; word-break: break-word; word-wrap: normal; background: transparent;"><span class="php" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;"><span class="hljs-preprocessor" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(68, 68, 68); background: transparent;">&lt;?php</span>
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 引入验证类</span>
<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">require</span> <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;CheckTool.php&#39;</span>;
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 短息请求错误码</span>
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$statusStr</span> = <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">array</span>(
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;0&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;短信发送成功&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;-1&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;参数不全&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;-2&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;服务器空间不支持,请确认支持curl或者fsocket，联系您的空间商解决或者更换空间！&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;30&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;密码错误&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;40&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;账号不存在&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;41&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;余额不足&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;42&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;帐户已过期&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;43&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;IP地址限制&quot;</span>,
    <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;50&quot;</span> =&gt; <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;内容含有敏感词&quot;</span>
);

<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span> = <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">array</span>();
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$postCode</span> = trim(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_POST</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;code&#39;</span>]);
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$postPhone</span> = trim(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_POST</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;phone&#39;</span>]);
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 验证图形验证码的合法性</span>
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span> = CheckTool::checkCode(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$postCode</span>);

<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">if</span> (<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">true</span> !== <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span>) {
    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">echo</span> responseErr(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span>, <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;code&#39;</span>);
    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">exit</span>();
}
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 验证手机号码的合法性</span>
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span> = CheckTool::checkPhone(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$postPhone</span>);

<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">if</span> (<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">true</span> !== <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span>) {
    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">echo</span> responseErr(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span>, <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;phone&#39;</span>);
    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">exit</span>();
}
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 调用短信发送接口</span>
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span> = sendSms(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$postPhone</span>);

<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 短信发送失败</span>
<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">if</span> (<span class="hljs-number" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">0</span> != <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span>) {
    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">echo</span> responseErr(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$statusStr</span>[<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$isOk</span>], <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send&#39;</span>);
    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">exit</span>();
}

<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 短信发送成功</span>
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;flg&#39;</span>] = <span class="hljs-number" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">1</span>;
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 记录发送时间</span>
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send_time&#39;</span>] = time();
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 记录用户的手机号码</span>
<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send_phone&#39;</span>] = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$postPhone</span>;
<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">echo</span> json_encode(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>);

<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">/**
 * 调用短信宝的短信接口，发送短信请求。
 *<span class="hljs-phpdoc" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;"> @param</span> $phoneNum
 *<span class="hljs-phpdoc" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;"> @return</span> string
 */</span>
<span class="hljs-function" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;"><span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">function</span> <span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;">sendSms</span><span class="hljs-params" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;">$phoneNum</span>)</span> {</span>
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$data</span> = <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">include</span>(<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;../config/config.php&#39;</span>);

    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">if</span> (<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">empty</span>(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$data</span>)) {
        <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">return</span> <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;40&quot;</span>;
    }

    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$url</span> = <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;http://www.smsbao.com/sms?&#39;</span>;
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$userName</span> = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$data</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;smsbao_name&#39;</span>]; <span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">//数据库获取用户名</span>
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$password</span> = md5(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$data</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;smsbao_password&#39;</span>]); <span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">//数据库获取密码</span>
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$phone</span> = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$phoneNum</span>;
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$code</span> = rand(<span class="hljs-number" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">100000</span>, <span class="hljs-number" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">999999</span>);
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$content</span> = <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;【短信宝】你的短信验证码为&#39;</span>.<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$code</span>.<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;，请及时查收，如非本人操作，请忽略。&#39;</span>;
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$url</span> .= <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;u=&#39;</span> . <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$userName</span> . <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;&amp;p=&#39;</span> . <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$password</span> . <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;&amp;m=&#39;</span> . <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$phone</span> . <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;&amp;c=&#39;</span> . urlencode(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$content</span>);
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;sms_code&#39;</span>] = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$code</span>;

    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">return</span> file_get_contents(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$url</span>);
}

<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">/**
 * 向前端发送错误信息
 *<span class="hljs-phpdoc" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;"> @param</span> $msg
 *<span class="hljs-phpdoc" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;"> @param</span> $type
 *<span class="hljs-phpdoc" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;"> @return</span> string
 */</span>
<span class="hljs-function" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;"><span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">function</span> <span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;">responseErr</span><span class="hljs-params" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;">$msg</span>, <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;">$type</span>)</span>
{</span>
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span> = <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">array</span>();
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;flg&#39;</span>] = -<span class="hljs-number" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">1</span>;
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;err&#39;</span>] = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$msg</span>;
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;type&#39;</span>] = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$type</span>;

    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">return</span> json_encode(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>);
}</span></code></pre>
<br />
<p style="box-sizing: border-box; margin: 0px 0px 1.1em; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; font-size: 15px; vertical-align: baseline; color: rgb(102, 102, 102); line-height: 26px; background: transparent;">
	二. 提交表单完成模拟注册: 当收到短信宝接口发出的短信验证码时，把验证码填入到表单中，点击提交按钮就完成了整个模拟验证过程。&nbsp;<br style="box-sizing: border-box;" />
	表单提交到当前页面上，也就是sms/register.php中。我们先分析一下，具体需要做哪些事情：&nbsp;<br style="box-sizing: border-box;" />
	(1). 当页面加载时，获取用户上次发送短信验证码的时间，以及当前时间。如果：当前时间 - 上次发送时间 &lt; 间隔时间，那么前端的发送按钮进入倒计时状态。&nbsp;<br style="box-sizing: border-box;" />
	(2). 验证表单提交的数据。成功后跳转。&nbsp;<br style="box-sizing: border-box;" />
	代码如下：</p>
<pre class="prettyprint" style="box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: 14px; white-space: nowrap; padding: 5px 5px 5px 60px; margin-top: 0px; margin-bottom: 1.1em; line-height: 1.45; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; outline: 0px; vertical-align: baseline; position: relative; overflow-y: hidden; overflow-x: auto; background: rgba(128, 128, 128, 0.0470588);">
<code class="hljs xml has-numbering" style="box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: inherit; padding: 0px; color: inherit; white-space: pre; border-radius: 0px; margin: 0px; border: 0px; outline: 0px; vertical-align: baseline; display: block; word-break: break-word; word-wrap: normal; background: transparent;"><span class="php" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; background: transparent;"><span class="hljs-preprocessor" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(68, 68, 68); background: transparent;">&lt;?php</span>
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 开启session</span>
session_start();
<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 引入工具类</span>
<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">require</span>(<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;tool/CheckTool.php&#39;</span>);
<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">require</span>(<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;tool/Helpers.php&#39;</span>);

<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$diff</span> = <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;&#39;</span>;

<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 得到上次短信请求时间，和当前时间做对比。</span>
<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">if</span> (<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">isset</span>(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send_time&#39;</span>]) &amp;&amp; is_int(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send_time&#39;</span>])) {
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$currentTime</span> = time();
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$diff</span> = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$currentTime</span> - <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send_time&#39;</span>];
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$diff</span> = <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$diff</span> &lt; <span class="hljs-number" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">60</span> ? <span class="hljs-number" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">60</span> - <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$diff</span> : <span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;&#39;</span>;
}

<span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 获取表单数据，进行验证，成功后跳转到登入页面。</span>
<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">if</span> (!<span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">empty</span>(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_POST</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;is_send&#39;</span>])) {
    <span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 去除提交数据的两端空格。</span>
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$data</span> = Helpers::removeSpaces(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_POST</span>);
    <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span> = CheckTool::exec(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$data</span>);

    <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">if</span> (!is_array(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>) &amp;&amp; <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">true</span> === <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$res</span>) {
        <span class="hljs-comment" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(136, 0, 0); background: transparent;">// 清除记录的验证码和手机号码</span>
        <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;sms_code&#39;</span>] = <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">null</span>;
        <span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send_phone&#39;</span>] = <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">null</span>;
        <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">unset</span>(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;sms_code&#39;</span>]);
        <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">unset</span>(<span class="hljs-variable" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">$_SESSION</span>[<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&#39;send_phone&#39;</span>]);
        header(<span class="hljs-string" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;Location:login.php&quot;</span>);
        <span class="hljs-keyword" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">exit</span>();
    }
}

<span class="hljs-preprocessor" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(68, 68, 68); background: transparent;">?&gt;</span></span></code></pre>
<br />
<p style="box-sizing: border-box; margin: 0px 0px 1.1em; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; font-size: 15px; vertical-align: baseline; color: rgb(102, 102, 102); line-height: 26px; background: transparent;">
	提交完成后，跳转到成功提示页面sms/login.php中。代码如下：</p>
<pre class="prettyprint" style="box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: 14px; white-space: nowrap; padding: 5px 5px 5px 60px; margin-top: 0px; margin-bottom: 1.1em; line-height: 1.45; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; outline: 0px; vertical-align: baseline; position: relative; overflow-y: hidden; overflow-x: auto; background: rgba(128, 128, 128, 0.0470588);">
<code class="hljs xml has-numbering" style="box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: inherit; padding: 0px; color: inherit; white-space: pre; border-radius: 0px; margin: 0px; border: 0px; outline: 0px; vertical-align: baseline; display: block; word-break: break-word; word-wrap: normal; background: transparent;"><span class="hljs-doctype" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">html</span> <span class="hljs-attribute" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">lang</span>=<span class="hljs-value" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;en&quot;</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">head</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">meta</span> <span class="hljs-attribute" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">charset</span>=<span class="hljs-value" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">title</span>&gt;</span>登入页面<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;/<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">title</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;/<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">head</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">body</span>&gt;</span>
    <span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">p</span> <span class="hljs-attribute" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">style</span>=<span class="hljs-value" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;text-align: center; margin-top:30px; font-size:25px;&quot;</span>&gt;</span>恭喜你！登入成功！
        <span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">a</span> <span class="hljs-attribute" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">style</span>=<span class="hljs-value" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;color:blue;&quot;</span> <span class="hljs-attribute" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(102, 0, 102); background: transparent;">href</span>=<span class="hljs-value" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 136, 0); background: transparent;">&quot;register.php&quot;</span>&gt;</span>返回<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;/<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">a</span>&gt;</span>注册界面。
    <span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;/<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">p</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;/<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">body</span>&gt;</span>
<span class="hljs-tag" style="box-sizing: border-box; margin: 0px; padding: 0px; font-family: 'Microsoft YaHei'; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 102, 102); background: transparent;">&lt;/<span class="hljs-title" style="box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; color: rgb(0, 0, 136); background: transparent;">html</span>&gt;</span></code></pre>
<span style="color: rgb(102, 102, 102); font-family: 'Microsoft YaHei'; font-size: 15px; line-height: 26px;">好了，后端的业务逻辑都在这里了。关于前端的接口调用，短信发送后的倒计时等功能，我们留到这个系列的最后一篇，&ldquo;前端篇&rdquo;来介绍。</span><br />
<br />
</div>
        </div>
<div class="new_con_others">
              <div class="right_box">
                  <div class="search" style="width:220px; margin-top:0; float:left; margin-bottom:15px;">
                      <form name="formsearch" action="/plus/search.php" style="display:inline;">
                          <input type="hidden" name="kwtype" value="0">
                          <input name="q" type="text" style="width:220px; height:26px;" class="search-text search-keyword" id="search-keyword" value="在这里搜索..." onfocus="if(this.value=='在这里搜索...'){this.value='';}" onblur="if(this.value==''){this.value='在这里搜索...';}">
                          <!--<input class="search-text" name="keyword" type="text" value="请输入关键字" />-->
                          <input id="search-option" type="hidden" name="searchtype" value="title">
                          <a onclick="formsearch.submit();" class="search-btn" style="cursor: pointer; top:8px; right:0px;"></a>
                      </form>
                  </div>
                  <div style="clear:both;"></div>
                  <h1>文章标签</h1>

                <ul>
                    
                    <li><a href="/tags.php?/%E7%9F%AD%E4%BF%A1%E9%98%B2%E8%8C%83/">短信防范</a></li>
                    
                    <li><a href="/tags.php?/%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/">短信验证码</a></li>
                    
                    <li><a href="/tags.php?/%E7%9F%AD%E4%BF%A1%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/">短信接口开发</a></li>
                    
                    <li><a href="/tags.php?/app%E7%9F%AD%E4%BF%A1%E6%8E%A5%E5%8F%A3/">app短信接口</a></li>
                    
                    <li><a href="/tags.php?/%E7%9F%AD%E4%BF%A1%E8%90%A5%E9%94%80%E5%B9%B3%E5%8F%B0/">短信营销平台</a></li>
                    
                    <li><a href="/tags.php?/%E7%9F%AD%E4%BF%A1%E9%80%9A%E7%9F%A5%E5%B9%B3%E5%8F%B0/">短信通知平台</a></li>
                    
                    <li><a href="/tags.php?/%E7%9F%AD%E4%BF%A1%E6%8E%A5%E5%8F%A3/">短信接口</a></li>
                    
                    <li><a href="/tags.php?/%E7%BD%91%E7%AB%99%E7%9F%AD%E4%BF%A1%E6%8E%A5%E5%8F%A3/">网站短信接口</a></li>
                    
                </ul>
              </div>
          </div> 
      </div>   
    </div>
  </div>
<div style="clear:both;"></div>
 <div class="news_bg_01">
    <div class="news_01">
      <div class="content_title" style="font-size:24px; font-family:'微软雅黑';">相关文章推荐</div>
      <div class="news_con_01">
        <div class="news_con_left fl"> 
        <dl>
            <dt>
              <div class="news_title_01 fl"><a href="/application/2016/0505/102.html">app短信接口的应用</a></div>
              <div class="news_date_01 fr"></div>
              <div class="clear"></div>
            </dt>
            <dd><a href="/application/2016/0505/102.html">短信宝为您提供优质的app短信接口。那么怎么样的短信平台才能算得上是优质呢？ 1. 发送类型...</a></dd>
          </dl>
<dl>
            <dt>
              <div class="news_title_01 fl"><a href="/application/2016/0505/103.html">短信宝短信接口开发的技术服务</a></div>
              <div class="news_date_01 fr"></div>
              <div class="clear"></div>
            </dt>
            <dd><a href="/application/2016/0505/103.html">短信宝提供以下技术支持服务，方便您与我们平台对接： 1. 短信宝提供多种语言的短信平台接...</a></dd>
          </dl>
<dl>
            <dt>
              <div class="news_title_01 fl"><a href="/application/2016/0505/99.html">优质验证码短信接口的重要性</a></div>
              <div class="news_date_01 fr"></div>
              <div class="clear"></div>
            </dt>
            <dd><a href="/application/2016/0505/99.html">在这个商场如战场，竞争异常激烈的互联网时代，凭什么让你脱颖而出，获得大量的用户？ 我...</a></dd>
          </dl>
        
        </div>
		
        <div class="news_con_right fr">
         <dl>
            <dt>
              <div class="news_title_01 fl"><a href="/application/2016/1209/135.html">如何有效防范短信炸弹攻击</a></div>
              <div class="news_date_01 fr"></div>
              <div class="clear"></div>
            </dt>
            <dd><a href="/application/2016/1209/135.html">如何有效防范短信炸弹攻击 现在国内大多数功能性网站和手机APP应用，都使用到了手机的短信...</a></dd>
          </dl>
<dl>
            <dt>
              <div class="news_title_01 fl"><a href="/application/2016/0505/98.html">多功能电商网站和网站短信接口的应用</a></div>
              <div class="news_date_01 fr"></div>
              <div class="clear"></div>
            </dt>
            <dd><a href="/application/2016/0505/98.html">随着互联网的蓬勃发展，访问网站已经成为每个人生活的一部分。从最初的全静态展示类网站...</a></dd>
          </dl>
<dl>
            <dt>
              <div class="news_title_01 fl"><a href="/application/2016/0505/101.html">短信营销平台的营销策略</a></div>
              <div class="news_date_01 fr"></div>
              <div class="clear"></div>
            </dt>
            <dd><a href="/application/2016/0505/101.html">网站在用户注册时，一般都会要求用户填写手机号码，或者使用手机号码获取验证码短信，这...</a></dd>
          </dl>
        
        </div>
        <div class="clear"></div>
      </div>
    </div>
  </div>
</div>
</div><div  class="footer ">
    <div  class="webContainer">
        <div  class="footer-nav-box service">
          
        </div>
        <div  class="footer-nav-box support">
            <div  class="footer-title">
                <h2><a href="/contactus" style="color:#fff">联系我们</a></h2>
                <span  class="ft-bg"></span>
            </div>
            <div  class="footer-box">
                <p>
                    客服邮箱：<br>
                    support@smsbao.com
                    <a target="_blank" href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzkzODA0NjAyMV8yNTU0MzFfNDAwMDA5MDQ2NV8yXw">
				<img border="0" src="http://wpa.qq.com/pa?p=2:123456:51" alt="短信宝客服" title="短信宝客服" /></a>

                </p>
                <!--<p class="webQQgroup"><a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=15766f40539827f7fb3d10bb9b9699b6a7ff3cfa7162341d46cb8f79e4f7dae3"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="点击这里加入此群" title="点击这里加入此群"></a></p>-->
            </div>
        </div>
        <div  class="footer-nav-box aboutus">
            <div  class="footer-title">
                <h2>使用指南</h2>
                <span  class="ft-bg"></span>
            </div>
            <div  class="footer-box">
                <ul>
                    
                    <li  class="first">
                        <a  href="/help/index.html">使用指南</a><br />
                    </li>
                    <li  class="first">
                        <a  href="/help/faq.html">常见问题</a>
                    </li>
                </ul>
            </div>
        </div>
        <div  class="footer-nav-box aboutus">
            <div  class="footer-title">
                <h2><a href="/aboutus" style="color:#fff">关于我们</a></h2>
                <span  class="ft-bg"></span>
            </div>
            <div  class="footer-box">
                <ul>
                    <li  class="first">
                        <a  href="http://t.qq.com/smsbao" target="_blank">腾讯微博</a><br />
                    </li>
                </ul>
            </div>
        </div>
        <div  class="footer-qcode">
            <img  class="lazy"  src="/style_sb/images/qr-code.png"  height="141">
        </div>
    </div>
</div>

<script>
    $(function(){
        $('body').on('click', '.qq', function(e){
            $('.contact-qq').parent().find('iframe').contents().find('#launchBtn').click()
        });
    });
</script>
<div  class="clear"></div>
<div  class="page-bottom">
	<ul><li>友情链接：</li><li><a href='http://www.gap.cn/' target='_blank'>GAP</a> </li><li><a href='http://www.kaola100.com/' target='_blank'>考拉网</a> </li><li><a href='http://www.luzhou.com/' target='_blank'>大泸网</a> </li><li><a href='http://www.bbs-p2p.com' target='_blank'>P2P理财论坛</a> </li><li><a href='http://www.wforder.com/' target='_blank'>WFPHP在线订单管理系统</a> </li><li><a href='http://www.niucms.cn/' target='_blank'>Niucms智慧生活系统</a> </li><li><a href='http://www.yungoucms.com' target='_blank'>yungoucms</a> </li><li><a href='http://www.lanyecn.com/' target='_blank'>蓝叶云</a> </li><li><a href='http://www.zhicms.cc' target='_blank'>zhicms</a> </li><li><a href='http://www.liuliangx.com' target='_blank'>兜兜友</a> </li><li><a href='http://www.demohour.com/' target='_blank'>点名时间</a> </li><li><a href='http://hua.li' target='_blank'>花里花店</a> </li><li><a href='http://oldnavy.gap.cn/' target='_blank'>Old Navy</a> </li><li><a href='http://www.wqggg.com/' target='_blank'>万千购</a> </li></ul>
    <p>Copyright © 2010-2014 smsbao.com All Rights Reserved <br />上海子橙电子科技有限公司 沪ICP备14008182号-1 上海市松江区广富林路658弄215号</p>
</div>
<link href="/kefu/css/style.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="/kefu/js/kefu.js"></script>
<!--在线客服Begin-->
<div id="floatTools" class="rides-cs">
	<div class="floatL">
		<a style="display: block" id="aFloatTools_Show" class="btnOpen" title="查看在线客服" onclick="javascript:$('#divFloatToolsView').animate({width: 'show', opacity: 'show'}, 'normal',function(){ $('#divFloatToolsView').show();kf_setCookie('RightFloatShown', 0, '', '/', 'www.smsbao.com'); });$('#aFloatTools_Show').attr('style','display:none');$('#aFloatTools_Hide').attr('style','display:block');" href="javascript:void(0);">
		展开</a>
		<a style="display: none" id="aFloatTools_Hide" class="btnCtn" title="关闭在线客服" onclick="javascript:$('#divFloatToolsView').animate({width: 'hide', opacity: 'hide'}, 'normal',function(){ $('#divFloatToolsView').hide();kf_setCookie('RightFloatShown', 1, '', '/', 'www.smsbao.com'); });$('#aFloatTools_Show').attr('style','display:block');$('#aFloatTools_Hide').attr('style','display:none');" href="javascript:void(0);">
		收缩</a> </div>
	<div id="divFloatToolsView" class="floatR" style="display: none">
		<div class="cn">
                                 <h3>工作时间</h3>
			<ul>
				<li><span>周一至周五</span></li>
                                           <li><span>9:00 - 18:00</span></li>
			</ul>

                                <h3>热线电话</h3>
			<ul>
				<li><span>400-716-3021</span></li>
			</ul>

			<h3>产品支持</h3>
			<ul>
				<li><span>客服</span>
				<a target="_blank" href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzkzODA0NjAyMV8yNTU0MzFfNDAwMDA5MDQ2NV8yXw">
				<img border="0" src="http://wpa.qq.com/pa?p=2:123456:51" alt="短信宝客服" title="短信宝客服" /></a>
				</li>
			</ul>
			<h3>渠道合作</h3>
			<ul>
				<li><span>客服</span>
				<a target="_blank" href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzkzODA0NjAyMV8yNTU0MzFfNDAwMDA5MDQ2NV8yXw">
				<img border="0" src="http://wpa.qq.com/pa?p=2:123456:51" alt="渠道合作" title="渠道合作" /></a></li>
			</ul>
		</div>
	</div>
</div>
<!--在线客服End-->

<div style="display:none">
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1254025928'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1254025928' type='text/javascript'%3E%3C/script%3E"));</script>
<script type="text/javascript">
var _maq = _maq || [];
var key = "UV_APPLE";
_maq.push(['apiKey', '100000'],['name', key]);
(function() {
    var ma = document.createElement('script'); ma.type = 'text/javascript'; ma.async = true;
    ma.src = ('https:' == document.location.protocol ? 'https://stats' : 'http://stats') + '.smsbao.com/webstats.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ma, s);
})();
</script>

</div>

<script>
    $(function() {
        var banner = $(".news_banner");

        if (banner.length > 0) {
            $(".nav_main_div").find("img").attr("src", "/style_sb/images/logo.png");
            $(".footer").css({"background":"url(/style_sb/images/footer-bg.png) repeat-x", "height":"248px"});
$(".page-bottom").find("a").css("color", "#ccc");
        }

        if ($(".local").length > 0) {
            var alist = $(".local").find("a");
            var that = null;
            alist.each(function() {
                that = $(this);

                if (that.text() == '短信宝') {
                    that.attr("href", "/");
                } else if (that.text() == '黑板报') {

                    that.attr("href", "javascript:void(0);");
                }
            });
        }
});
</script>
<script>
$(function(){
    if ($("#nav").length > 0) {
 var pathName = window.location.pathname;
        var curIndex = 0;
        var navNode = $("#nav");

       // pathName = pathName.replace("/", "");

        if (-1 != pathName.indexOf("index") || pathName == "") {
            curIndex = 0;
        } else if (-1 != pathName.indexOf("buzz") || -1 != pathName.indexOf("application") || -1 != pathName.indexOf("tags")) {
            curIndex = 1;
        } else if (-1 != pathName.indexOf("help")) {
            curIndex = 2;
        } else if (-1 != pathName.indexOf("openapi")) {
            curIndex = 3;
        } else if (-1 != pathName.indexOf("plugin")) {
            curIndex = 4;
        } else if (-1 != pathName.indexOf("joinin")) {
            curIndex = 5;
        } else if (-1 != pathName.indexOf("fee")) {
            curIndex = 6;
        } else {
            curIndex = 0;
        }
//alert(curIndex);
        $(".nav_item").find("a").removeClass("navCur");
$(".nav_item").eq(curIndex).children("a").addClass("navCur");
      
}

    var rightBox = $(".right_box");

    if (rightBox.length > 0) {

        var index = 0;
        var that = null;

        rightBox.find("li").each(function() {
            that = $(this);
            index = that.index();

            if (0 == index % 2) {
                
                that.css("float", "right");
            }
        });
    }

    if ($(".show_column").length > 0) {
        $(".show_column").subColumnShow({
            "pullDownBgColor":"#fff",
            "pullDownBorder":"1px solid #eee",
            "showSpeed":200
        });
    }

    if($(".news_con").length > 0){
        $(".webContainer").css("width", 1200);
        $(".nav_main").css("width", 1200);
        $(".page-bottom").find("ul").css("width", 1200);
        $(".page-bottom").find("p").css("width", 1200);
        
    }

});
</script>
</body>
</html>
